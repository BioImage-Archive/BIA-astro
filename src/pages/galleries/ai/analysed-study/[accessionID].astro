---
import BaseLayoutWithBreadcrumbs from "../../../../layouts/BaseLayoutWithBreadcrumbs.astro";
import BenchmarkedDatasetPage from "../../../../components/ai-benchmarking/BenchmarkedDatasetPage.astro"
import {getStudy} from "../../../../components/SharedJSFunctions.js"
import { type Study } from "../../../../components/SharedInterface.astro"
import additionalStudyMetadata from "../../../../data/ai-dataset-benchmarking/additional-study-metadata.json"
import tableInfo from "../../../../data/ai-dataset-benchmarking/model-dataset-table.json"


export function getStaticPaths() {
  return Object.keys(additionalStudyMetadata).map((id) => {
    return {
      params: { accessionID: id },
    };
  });
}

const { accessionID } = Astro.params;
const study = await getStudy("accession", accessionID) as Study;
const studyMetadata = {
  [accessionID]: study
};

const breadcrumbs = [
  "/bioimage-archive",
  "/bioimage-archive/galleries",
  "/bioimage-archive/galleries/ai",
  "/bioimage-archive/galleries/ai/analysed-studies",
]
---

<BaseLayoutWithBreadcrumbs pageTitle={accessionID} breadcrumbs={breadcrumbs}>
  {
    studyMetadata[accessionID] ? 
      <BenchmarkedDatasetPage accessionID={accessionID} studyMetadata={studyMetadata} additionalStudyMetadata={additionalStudyMetadata} tableInfo={tableInfo}/> : 
      <p>Oops something went wrong. No study data available for this accession ID.</p>
}
</BaseLayoutWithBreadcrumbs>


