---
const { tableOfContents, originalStudyLink, headlineStats, similarStudies} = Astro.props;

---
<section class="vf-content | embl-grid embl-grid--has-centered-content">
  <div>
    <div>
      <h2 class="vf-section-header__heading">On this page</h2>
      <ul class="vf-list">
        {
          Object.entries(tableOfContents).map(([text_title, id]) => (
            <li class="vf-list__item">
              <a class="vf-list__link" href={"#" + id}>
                {text_title}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </div>

  <slot name="hero-image"/>

  <div>
    <a href={originalStudyLink}>
      <button class="vf-button vf-button--primary vf-button--sm"
        >Original study</button
      >
    </a>
    <slot name="ftp-link" />
  {
    similarStudies && (
<table class="similar-table">
  <thead>
    <tr>
      <th>Similar studies</th>
    </tr>
  </thead>
  <tbody>
    {similarStudies.slice(1).map((study, idx) => {
      const rowClass = idx % 2 === 0 ? "alt" : "";
      return (
        <tr class={rowClass}>
          <td>
            <a href={`/bioimage-archive/study/${study["accession_id"]}`}>
              {study["title"]}
            </a>
          </td>
        </tr>
      );
    })}
  </tbody>
</table>

<style>
  .similar-table {
  width: 30vw;
  border-collapse: collapse;
}  .similar-table th,
  .similar-table td {
    padding: 0.4rem 0.6rem;
    text-align: left;
    border-bottom: 1px solid #e0e0e0;
  }
  .similar-table tr.alt {
    background: #f5f5f5;
  }
</style>    )
  }
  </div>
</section>
{
    headlineStats && (
        <section class="vf-content">
            <div class="vf-grid | vf-grid__col-3 ">
                {Object.entries(headlineStats).map(([key, value]) => (
                    <div style="text-align: center;">
                        {key}
                        <br />
                        {value}
                    </div>
                ))}
            </div>
        </section>
    )
}
