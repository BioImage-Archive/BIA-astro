---
import "/src/styles/active_left_menu.css"

const page_data = {
  "faq": "FAQ",      
  "search": "Searching Data",
  "downloading-data":"Downloading Data",
  "supporting-tools": "Supporting Tools",
  "galleries-contribute": "Contribute to Galleries"
}
const submission_help = {
  "file-list": "File List Guide",
  "submit-annotations": "Submit Annotations",
  "ai-glossary": "Annotation Types",
  "linking-archives": "Linking to Other Archives"
}
const metadata_help = {
  "rembi-overview": "REMBI Overview",
  "rembi-lab-guide": "REMBI Lab Guide",
  "rembi-examples": "REMBI Examples",
  "rembi-model-reference": "REMBI Model Reference",
  "mifa-overview": "MIFA Overview",
  "mifa-model-reference": "MIFA Model Reference"
}

// Method to make sure dev and prod behave the same whilst having Astro config trailingslash set to ignore by default
function addTrailingSlash(pathname: String) {
    pathname += pathname.endsWith("/") ? "" : "/";
    return pathname
}

const path_name = addTrailingSlash(Astro.url.pathname)
const page_name = path_name.split('/').at(-2);
---
  <ul class="vf-list vf-list--l">
    <li class={page_name === "help" ? "vf-list__item | active" : "vf-list__item"}>
      <a href={`/bioimage-archive/help`} class="vf-navigation__link">Help Overview</a>
  </li>
  </ul>
  <details class="vf-details" open={page_name in submission_help ? true : false}>
    <summary class="vf-details--summary">Submission Help</summary>
  <ul class="vf-list vf-list--l">
    {Object.entries(submission_help).map(([key, value]) => (
      <li class={page_name === key ? "vf-list__item | active" : "vf-list__item"}>
          <a href={`/bioimage-archive/help/${key}`} class="vf-navigation__link">{value}</a>
      </li>
      )
    )}
  </ul> 
</details>   
  <details class="vf-details" open={page_name in metadata_help ? true : false}>
    <summary class="vf-details--summary">Metadata Help</summary>
  <ul class="vf-list vf-list--l">
    {Object.entries(metadata_help).map(([key, value]) => (
      <li class={page_name === key ? "vf-list__item | active" : "vf-list__item"}>
          <a href={`/bioimage-archive/help/${key}`} class="vf-navigation__link">{value}</a>
      </li>
      )
    )}
  </ul> 
</details>  
    <ul class="vf-list vf-list--l">
      {Object.entries(page_data).map(([key, value]) => (
        <li class={page_name === key ? "vf-list__item | active" : "vf-list__item"}>
            <a href={`/bioimage-archive/help/${key}`} class="vf-navigation__link">{value}</a>
        </li>
        )
      )}
    </ul>
<!-- </nav> -->